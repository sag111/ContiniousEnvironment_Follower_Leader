envconf_v0 {
    env: continuous-grid
    normalize_actions = True
    env_config {
        name = Test-Cont-Env-Auto-v0
        base_env_config = {
            warm_start = 0
            max_steps = 5000
            frames_per_step = 5
            add_obstacles = False
            framerate = 5000
            constant_follower_speed = False
            early_stopping = {
                max_distance_coef = 1.3
                low_reward = -200
            }
            follower_sensors = {
                LeaderCorridor_lasers = {
                    sensor_name = LeaderCorridor_lasers
                    react_to_obstacles = False
                }
                LeaderPositionsTracker = {
                    eat_close_points = True
                    generate_corridor = True
                    saving_period = 8
                    sensor_name = LeaderPositionsTracker
                }
                LeaderTrackDetector_radar = {
                    detectable_positions = near
                    position_sequence_length = 100
                    radar_sectors_number = 7
                    sensor_name = LeaderTrackDetector_radar
                }
                LeaderTrackDetector_vector = {
                    position_sequence_length = 10
                    sensor_name = LeaderTrackDetector_vector
                }
            }
        }
        wrappers = [ContinuousObserveModifier_v0]
    }
}

envconf_v0_noNorm = ${envconf_v0} {
    normalize_actions = False
}


envconf_v0_constSpeed = ${envconf_v0} {
    env_config {
        base_env_config = {
            constant_follower_speed = True
        }
    }
}

envconf_v0_constSpeed_noNorm = ${envconf_v0_noNorm} {
    env_config {
        base_env_config = {
            constant_follower_speed = True
        }
    }
}

# v1
envconf_obst_noNorm = ${envconf_v0} {
    normalize_actions = False
    env_config {
        base_env_config {
            add_obstacles = True
            follower_sensors = {
                    LeaderCorridor_lasers = {
                        sensor_name = LeaderCorridor_lasers
                    }
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LeaderTrackDetector_radar = {
                        detectable_positions = near
                        position_sequence_length = 100
                        radar_sectors_number = 7
                        sensor_name = LeaderTrackDetector_radar
                    }
                    LeaderTrackDetector_vector = {
                        position_sequence_length = 10
                        sensor_name = LeaderTrackDetector_vector
                    }
            }
        }
    }
}

# v2
envconf_v2_obst_noNorm_dynLSpd_dynFPS = ${envconf_obst_noNorm} {
    env_config {
        base_env_config {
            random_frames_per_step = [2,20]
            leader_speed_regime = {
                0 = [0.2, 1]
                200 = 1
                1000 = 0.75
                1500 = 0.9
                2000 = 0
                2100 = 1
                3000 = [0.5, 1]
            }
            follower_sensors = {
                LeaderCorridor_lasers = {
                    react_to_obstacles = True
                }
            }
        }
    }
}
##################
# MyNorm wrapper #
##################
envconf_v0_MyNorm = ${envconf_v0} {
    env_config {
        wrappers = [ContinuousObserveModifier_v1]
    }
}

envconf_v0_constSpeed_MyNorm = ${envconf_v0_constSpeed} {
    env_config {
        wrappers = [ContinuousObserveModifier_v1]
    }
}
########################
# Features experiments #
########################

envconf_v0_noFeats = ${envconf_v0} {
    env_config {
        base_env_config = {
            follower_sensors = null
        }
    }
}
envconf_v0_feats_v1 = ${envconf_v0_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderCorridor_lasers = {
                        sensor_name = LeaderCorridor_lasers
                    }
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LeaderTrackDetector_radar = {
                        detectable_positions = near
                        position_sequence_length = 100
                        radar_sectors_number = 7
                        sensor_name = LeaderTrackDetector_radar
                    }
                }
        }
    }
}

envconf_v0_feats_v2 = ${envconf_v0_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors = null
            follower_sensors {
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LeaderCorridor_lasers = {
                        sensor_name = LeaderCorridor_lasers
                    }
                }
        }
    }
}

envconf_v0_feats_v3 = ${envconf_v0_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors = {
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LeaderTrackDetector_radar = {
                        detectable_positions = near
                        position_sequence_length = 100
                        radar_sectors_number = 7
                        sensor_name = LeaderTrackDetector_radar
                    }
                    LeaderTrackDetector_vector = {
                        position_sequence_length = 10
                        sensor_name = LeaderTrackDetector_vector
                    }
                }
        }
    }
}

envconf_v0_feats_v4 = ${envconf_v0_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors = {
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LeaderTrackDetector_radar = {
                        detectable_positions = near
                        position_sequence_length = 100
                        radar_sectors_number = 7
                        sensor_name = LeaderTrackDetector_radar
                    }
                }
        }
    }
}

envconf_v0_feats_v5 = ${envconf_v0_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors = {
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LeaderTrackDetector_vector = {
                        position_sequence_length = 10
                        sensor_name = LeaderTrackDetector_vector
                    }
                }
        }
    }
}

envconf_v0_feats_v6 = ${envconf_v0_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors = {
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LeaderCorridor_lasers = {
                        sensor_name = LeaderCorridor_lasers
                    }
                    LeaderTrackDetector_vector = {
                        position_sequence_length = 10
                        sensor_name = LeaderTrackDetector_vector
                    }
                }
        }
    }
}

envconf_v0_constSpeed_feats_v1 = ${envconf_v0_feats_v1} {
    env_config {
        base_env_config = {
            constant_follower_speed = True
        }
    }
}

envconf_v0_constSpeed_feats_v2 = ${envconf_v0_feats_v2} {
    env_config {
        base_env_config = {
            constant_follower_speed = True
        }
    }
}

envconf_v0_constSpeed_feats_v3 = ${envconf_v0_feats_v3} {
    env_config {
        base_env_config = {
            constant_follower_speed = True
        }
    }
}

envconf_v0_constSpeed_feats_v4 = ${envconf_v0_feats_v4} {
    env_config {
        base_env_config = {
            constant_follower_speed = True
        }
    }
}

envconf_v0_constSpeed_feats_v5 = ${envconf_v0_feats_v5} {
    env_config {
        base_env_config = {
            constant_follower_speed = True
        }
    }
}

envconf_v0_constSpeed_feats_v6 = ${envconf_v0_feats_v6} {
    env_config {
        base_env_config = {
            constant_follower_speed = True
        }
    }
}
##########################################
###               V2 ENV               ###
### obst, random frame, speed schedule ###
##########################################
envconf_v2_noFeats = ${envconf_v2_obst_noNorm_dynLSpd_dynFPS} {
    env_config {
        base_env_config = {
            follower_sensors = null
        }
    }
}
envconf_v2_feats_v1 = ${envconf_v2_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderCorridor_lasers = {
                        sensor_name = LeaderCorridor_lasers
                        react_to_obstacles = True
                    }
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                }
        }
    }
}

envconf_v2_feats_v2 = ${envconf_v2_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LeaderTrackDetector_radar = {
                        detectable_positions = near
                        position_sequence_length = 100
                        radar_sectors_number = 7
                        sensor_name = LeaderTrackDetector_radar
                    }
                }
        }
    }
}

envconf_v2_feats_v3 = ${envconf_v2_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LeaderTrackDetector_vector = {
                        position_sequence_length = 10
                        sensor_name = LeaderTrackDetector_vector
                    }
                }
        }
    }
}
envconf_v2_feats_v4 = ${envconf_v2_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                    LaserSensor = {
                        sensor_name = LaserSensor
                        available_angle = 360
                        angle_step = 10
                        points_number = 20
                        return_all_points = False
                    }
                }
        }
    }
}

envconf_v2_feats_v5 = ${envconf_v2_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderTrackDetector_radar = {
                        detectable_positions = near
                        position_sequence_length = 100
                        radar_sectors_number = 7
                        sensor_name = LeaderTrackDetector_radar
                    }
                    LeaderTrackDetector_vector = {
                        position_sequence_length = 10
                        sensor_name = LeaderTrackDetector_vector
                    }
                    LeaderCorridor_lasers = {
                        sensor_name = LeaderCorridor_lasers
                        react_to_obstacles = True
                    }
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                }
        }
    }
}
envconf_v2_feats_v6 = ${envconf_v2_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderTrackDetector_radar = {
                        detectable_positions = near
                        position_sequence_length = 100
                        radar_sectors_number = 7
                        sensor_name = LeaderTrackDetector_radar
                    }
                    LeaderTrackDetector_vector = {
                        position_sequence_length = 10
                        sensor_name = LeaderTrackDetector_vector
                    }
                    LaserSensor = {
                        sensor_name = LaserSensor
                        available_angle = 360
                        angle_step = 10
                        points_number = 20
                        return_all_points = False
                    }
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                }
        }
    }
}
envconf_v2_feats_v7 = ${envconf_v2_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderTrackDetector_radar = {
                        detectable_positions = near
                        position_sequence_length = 100
                        radar_sectors_number = 7
                        sensor_name = LeaderTrackDetector_radar
                    }
                    LeaderCorridor_lasers = {
                        sensor_name = LeaderCorridor_lasers
                        react_to_obstacles = True
                    }
                    LaserSensor = {
                        sensor_name = LaserSensor
                        available_angle = 360
                        angle_step = 10
                        points_number = 20
                        return_all_points = False
                    }
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                }
        }
    }
}
envconf_v2_feats_v8 = ${envconf_v2_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderTrackDetector_vector = {
                        position_sequence_length = 10
                        sensor_name = LeaderTrackDetector_vector
                    }
                    LeaderCorridor_lasers = {
                        sensor_name = LeaderCorridor_lasers
                        react_to_obstacles = True
                    }
                    LaserSensor = {
                        sensor_name = LaserSensor
                        available_angle = 360
                        angle_step = 10
                        points_number = 20
                        return_all_points = False
                    }
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                }
        }
    }
}
envconf_v2_feats_v9 = ${envconf_v2_noFeats} {
    env_config {
        base_env_config = {
            follower_sensors {
                    LeaderTrackDetector_radar = {
                        detectable_positions = near
                        position_sequence_length = 100
                        radar_sectors_number = 7
                        sensor_name = LeaderTrackDetector_radar
                    }
                    LeaderCorridor_lasers = {
                        sensor_name = LeaderCorridor_lasers
                        react_to_obstacles = True
                    }
                    LeaderPositionsTracker = {
                        eat_close_points = True
                        generate_corridor = True
                        saving_period = 8
                        sensor_name = LeaderPositionsTracker
                    }
                }
        }
    }
}